(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{100:function(t,e,a){t.exports=a(129)},105:function(t,e,a){},129:function(t,e,a){"use strict";a.r(e);var n,r,o=a(0),i=a.n(o),c=a(9),l=a.n(c),s=(a(105),a(67),a(173)),u=a(174),d=a(175),m=a(166),f=a(131),b=a(169),O=a(176),E=a(177),T=a(170),g=a(130),j=a(7),p=a(56),v=a(77),h=a.n(v).a.create(Object(j.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"fdb08a17-9e00-497a-9ef1-efaa046e77dc"}})),k=function(t){return h.post("auth/login",t)},I=function(){return h.get("auth/me")},S=function(){return h.delete("auth/login")},C=function(){return h.get("todo-lists")},y=function(t){return h.post("todo-lists",{title:t})},L=function(t){return h.delete("todo-lists/".concat(t))},A=function(t,e){return h.put("todo-lists/".concat(t),{title:e})},D=function(t){return h.get("todo-lists/".concat(t,"/tasks"))},w=function(t,e){return h.delete("todo-lists/".concat(t,"/tasks/").concat(e))},P=function(t,e){return h.post("todo-lists/".concat(t,"/tasks"),{title:e})},N=function(t,e,a){return h.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var R=function(t,e){t.messages.length?e(M(t.messages[0])):e(M("some error occurred")),e(H("failed"))},x=function(t,e){e(M(t.message?t.message:"Some error occurred")),e(H("failed"))},F={isLoggedIn:!1},G=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},K={status:"idle",error:null,isInitialized:!1},M=function(t){return{type:"APP/SET-ERROR",error:t}},H=function(t){return{type:"APP/SET-STATUS",status:t}},U=[],z=a(16),V=a(29),q={},B=function(t,e,a){return function(n,r){var o=r().tasks[a].find((function(e){return e.id===t}));if(o){var i=Object(j.a)({title:o.title,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},e);N(a,t,i).then((function(r){0===r.data.resultCode?n(function(t,e,a){return{type:"UPDATE-TASK",taskId:t,model:e,todolistId:a}}(t,e,a)):R(r.data,n)})).catch((function(t){x(t,n)}))}else console.warn("task not find in the state")}},Y=a(88),J=a(42),W=a(178),Z=a(167),$=i.a.memo((function(t){var e=t.addItem,a=t.disabled,n=void 0!==a&&a,r=Object(o.useState)(""),c=Object(J.a)(r,2),l=c[0],s=c[1],u=Object(o.useState)(null),d=Object(J.a)(u,2),f=d[0],b=d[1],O=function(){""!==l.trim()?(e(l.trim()),s("")):b("Title is required!")};return i.a.createElement("div",null,i.a.createElement(W.a,{disabled:n,value:l,id:"outlined-error-helper-text",variant:"outlined",label:"Type text",error:!!f,onChange:function(t){null!==f&&b(null),s(t.currentTarget.value)},onKeyPress:function(t){13===t.charCode&&O()},className:f?"error":"",helperText:f,size:"small"}),i.a.createElement(m.a,{disabled:n,onClick:O,color:"primary"},i.a.createElement(Z.a,{fontSize:"large"})))})),Q=i.a.memo((function(t){var e=Object(o.useState)(!1),a=Object(J.a)(e,2),n=a[0],r=a[1],c=Object(o.useState)(""),l=Object(J.a)(c,2),s=l[0],u=l[1];return n?i.a.createElement(W.a,{value:s,onChange:function(t){return u(t.currentTarget.value)},onBlur:function(){r(!1),t.onChange(s)},autoFocus:!0}):i.a.createElement("span",{onDoubleClick:function(){r(!0),u(t.title)}},t.title)})),X=a(168),_=a(180),tt=i.a.memo((function(t){var e=Object(o.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t]);return i.a.createElement("div",{key:t.task.id,className:t.task.status===n.Completed?"is-done":""},i.a.createElement(_.a,{checked:t.task.status===n.Completed,color:"primary",onChange:function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?n.Completed:n.New,t.todolistId)}}),i.a.createElement(Q,{title:t.task.title,onChange:e}),i.a.createElement(m.a,{onClick:function(){return t.removeTask(t.task.id,t.todolistId)}},i.a.createElement(X.a,null)))})),et=["demo"],at=i.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,r=Object(Y.a)(t,et),c=Object(z.b)();Object(o.useEffect)((function(){var t;a&&c((t=r.todolist.id,function(e){e(H("loading")),D(t).then((function(a){var n=a.data.items;e(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(n,t)),e(H("succeeded"))}))}))}),[c,r.todolist.id,a]);var l=Object(o.useCallback)((function(t){r.addTask(t,r.todolist.id)}),[r]),s=Object(o.useCallback)((function(t){r.changeTodoListTitle(r.todolist.id,t)}),[r]),u=Object(o.useCallback)((function(){return r.changeFilter("all",r.todolist.id)}),[r]),d=Object(o.useCallback)((function(){return r.changeFilter("active",r.todolist.id)}),[r]),f=Object(o.useCallback)((function(){return r.changeFilter("completed",r.todolist.id)}),[r]),O=r.tasks;return"active"===r.todolist.filter&&(O=r.tasks.filter((function(t){return t.status===n.New}))),"completed"===r.todolist.filter&&(O=r.tasks.filter((function(t){return t.status===n.Completed}))),i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(Q,{title:r.todolist.title,onChange:s}),i.a.createElement(m.a,{onClick:function(){r.removeTodoList(r.todolist.id)},disabled:"loading"===r.todolist.entityStatus},i.a.createElement(X.a,null))),i.a.createElement($,{addItem:l,disabled:"loading"===r.todolist.entityStatus}),i.a.createElement("div",null,O.map((function(t){return i.a.createElement(tt,{key:t.id,task:t,todolistId:r.todolist.id,removeTask:r.removeTask,changeTaskStatus:r.changeTaskStatus,changeTaskTitle:r.changeTaskTitle})}))),i.a.createElement("div",null,i.a.createElement(b.a,{variant:"all"===r.todolist.filter?"contained":"text",onClick:u,size:"small"},"All"),i.a.createElement(b.a,{variant:"active"===r.todolist.filter?"contained":"text",onClick:d,color:"primary",size:"small"},"Active"),i.a.createElement(b.a,{variant:"completed"===r.todolist.filter?"contained":"text",onClick:f,color:"secondary",size:"small"},"Completed")))})),nt=a(11),rt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(z.c)((function(t){return t.todolists})),r=Object(z.c)((function(t){return t.tasks})),c=Object(z.c)((function(t){return t.auth.isLoggedIn})),l=Object(z.b)();Object(o.useEffect)((function(){if(!a&&c){var t=function(t){t(H("loading")),C().then((function(e){t(H("succeeded")),t({type:"SET-TODOLISTS",todolists:e.data})})).catch((function(e){x(e,t)}))};l(t)}}),[l,a,c]);var s=Object(o.useCallback)((function(t,e){var a=function(t,e){return function(a){w(e,t).then((function(n){var r=function(t,e){return{type:"REMOVE-TASK",todolistId:e,taskId:t}}(t,e);a(r)}))}}(t,e);l(a)}),[l]),u=Object(o.useCallback)((function(t,e){var a=function(t,e){return function(a){a(H("loading")),P(e,t).then((function(t){0===t.data.resultCode?(a({type:"ADD-TASK",task:t.data.data.item}),a(H("succeeded"))):R(t.data,a)})).catch((function(t){x(t,a)}))}}(t,e);l(a)}),[l]),d=Object(o.useCallback)((function(t,e,a){var n=B(t,{status:e},a);l(n)}),[l]),m=Object(o.useCallback)((function(t,e,a){var n=B(t,{title:e},a);l(n)}),[l]),f=Object(o.useCallback)((function(t,e){l(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,id:e}}(t,e))}),[l]),b=Object(o.useCallback)((function(t){var e,a=(e=t,function(t){t(H("loading")),t({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:e,status:"loading"}),L(e).then((function(a){t(function(t){return{type:"REMOVE-TODOLIST",todolistId:t}}(e)),t(H("succeeded"))}))});l(a)}),[l]),O=Object(o.useCallback)((function(t,e){var a,n,r=(a=t,n=e,function(t){A(a,n).then((function(e){t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(a,n))}))});l(r)}),[l]),E=Object(o.useCallback)((function(t){var e=function(t){return function(e){y(t).then((function(t){e({type:"ADD-TODOLIST",todolist:t.data.data.item})}))}}(t);l(e)}),[l]);return c?i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{container:!0,style:{padding:"20px"}},i.a.createElement($,{addItem:E})),i.a.createElement(T.a,{container:!0,spacing:3},n.map((function(t){var e=r[t.id];return i.a.createElement(T.a,{item:!0,key:t.id},i.a.createElement(g.a,{elevation:3,style:{padding:"15px"}},i.a.createElement(at,{todolist:t,tasks:e,removeTask:s,changeFilter:f,addTask:u,changeTaskStatus:d,removeTodoList:b,changeTaskTitle:m,changeTodoListTitle:O,demo:a})))})))):i.a.createElement(nt.a,{to:"/login"})},ot=a(182),it=a(179);function ct(t){return i.a.createElement(it.a,Object.assign({elevation:6,variant:"filled"},t))}function lt(){var t=Object(z.c)((function(t){return t.app.error})),e=Object(z.b)(),a=function(t,a){"clickaway"!==a&&e(M(null))},n=null!==t;return i.a.createElement(ot.a,{open:n,autoHideDuration:3e3,onClose:a},i.a.createElement(ct,{onClose:a,severity:"error"},t))}var st=a(87),ut=a(183),dt=a(165),mt=a(171),ft=a(172),bt=a(86),Ot=function(){var t=Object(z.b)(),e=Object(z.c)((function(t){return t.auth.isLoggedIn})),a=Object(bt.a)({validate:function(t){return t.email?t.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(t){t(H("loading")),k(a).then((function(e){0===e.data.resultCode?(t(G(!0)),t(H("succeeded"))):R(e.data,t)})).catch((function(e){x(e,t)}))}))}});return e?i.a.createElement(nt.a,{to:"/"}):i.a.createElement(T.a,{container:!0,justify:"center"},i.a.createElement(T.a,{item:!0,xs:4},i.a.createElement("form",{onSubmit:a.handleSubmit},i.a.createElement(ut.a,null,i.a.createElement(dt.a,null),i.a.createElement(mt.a,null,i.a.createElement(W.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?i.a.createElement("div",null,a.errors.email):null,i.a.createElement(W.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?i.a.createElement("div",null,a.errors.password):null,i.a.createElement(ft.a,{label:"Remember me",control:i.a.createElement(_.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),i.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary"},"Login")))),i.a.createElement("br",null),"Login: shobanoff@gmail.com",i.a.createElement("br",null),"Password: 123456"))};var Et=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(z.c)((function(t){return t.app.status})),r=Object(z.c)((function(t){return t.app.isInitialized})),c=Object(z.c)((function(t){return t.auth.isLoggedIn})),l=Object(z.b)();Object(o.useEffect)((function(){l((function(t){I().then((function(e){0===e.data.resultCode&&t(G(!0)),t({type:"APP/SET-IS-INITIALIZED",value:!0})}))}))}),[l]);var T=Object(o.useCallback)((function(){l((function(t){t(H("loading")),S().then((function(e){0===e.data.resultCode?(t(G(!1)),t(H("succeeded"))):R(e.data,t)})).catch((function(e){x(e,t)}))}))}),[]);return r?i.a.createElement(st.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(lt,null),i.a.createElement(u.a,{position:"static"},i.a.createElement(d.a,null,i.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"}),i.a.createElement(f.a,{variant:"h5"},"Todolist"),c&&i.a.createElement(b.a,{color:"inherit",onClick:T},"Log out")),"loading"===n&&i.a.createElement(O.a,null)),i.a.createElement(E.a,{fixed:!0},i.a.createElement(nt.b,{path:"/",render:function(){return i.a.createElement(Ot,null)}}),i.a.createElement(nt.b,{exact:!0,path:"/",render:function(){return i.a.createElement(rt,{demo:a})}})))):i.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},i.a.createElement(s.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Tt=a(57),gt=a(85),jt=Object(Tt.b)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistId}));case"ADD-TODOLIST":return[Object(j.a)(Object(j.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(p.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(j.a)(Object(j.a)({},t),{},{status:e.status}):t}));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.task.todoListId,[e.task].concat(Object(p.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(j.a)(Object(j.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.todolistId}))));case"SET-TODOLISTS":var a=Object(j.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case"SET-TASKS":return Object(j.a)(Object(j.a)({},t),{},Object(V.a)({},e.todolistId,e.tasks));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(j.a)(Object(j.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(j.a)(Object(j.a)({},t),{},{error:e.error});case"APP/SET-IS-INITIALIZED":return Object(j.a)(Object(j.a)({},t),{},{isInitialized:e.value});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"login/SET-IS-LOGGED-IN":return Object(j.a)(Object(j.a)({},t),{},{isLoggedIn:e.value});default:return t}}}),pt=Object(Tt.c)(jt,Object(Tt.a)(gt.a));window.store=pt,l.a.render(i.a.createElement(z.a,{store:pt},i.a.createElement(Et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},67:function(t,e,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.a8feb2ff.chunk.js.map